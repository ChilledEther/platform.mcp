---
phase: 01-core-foundation
plan: 03
type: execute
wave: 3
depends_on: ["01-01", "01-02"]
files_modified: [pkg/scaffold/actions.go, pkg/scaffold/docker.go, pkg/scaffold/flux.go, pkg/scaffold/project.go]
autonomous: true
---

<objective>
Implement specific generators for GitHub Actions, Docker, and FluxCD, and wire them into the main entry point.

Purpose: Provide the core value of the library by generating project scaffolding.
Output: Specific sub-generators and a unified `Generate` function.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-core-foundation/01-01-SUMMARY.md
@.planning/phases/01-core-foundation/01-02-SUMMARY.md
@pkg/scaffold/types.go
@internal/templates/loader.go
</context>

<tasks>

<task type="auto">
  <name>Task 1: Actions Generator (TDD)</name>
  <files>pkg/scaffold/actions.go</files>
  <action>
    Implement logic to generate `.github/workflows/ci.yaml` using the embedded `workflow.yaml.tmpl`.
    Ensure the generator respects the `Config` flags.
  </action>
  <verify>
    Tests confirm the generated file path and content.
  </verify>
  <done>
    GitHub Actions generator implemented.
  </done>
</task>

<task type="auto">
  <name>Task 2: Docker Generator (TDD)</name>
  <files>pkg/scaffold/docker.go</files>
  <action>
    Implement logic to generate `Dockerfile` using `docker-build.yaml.tmpl`.
  </action>
  <verify>
    Tests confirm `Dockerfile` generation.
  </verify>
  <done>
    Docker generator implemented.
  </done>
</task>

<task type="auto">
  <name>Task 3: FluxCD Generator (TDD)</name>
  <files>pkg/scaffold/flux.go</files>
  <action>
    Implement logic to generate `fluxcd.yaml` using a new `fluxcd.yaml.tmpl` template.
  </action>
  <verify>
    Tests confirm `fluxcd.yaml` generation.
  </verify>
  <done>
    FluxCD generator implemented.
  </done>
</task>

<task type="auto">
  <name>Task 4: Main Generate Entrypoint</name>
  <files>pkg/scaffold/project.go</files>
  <action>
    Implement `NewProjectGenerator().Generate(cfg Config)` to orchestrate all sub-generators.
    Wire up flags to conditional generation.
  </action>
  <verify>
    Integration tests call `Generate` and verify the complete file set.
  </verify>
  <done>
    Unified generation entrypoint functional.
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `go test ./pkg/scaffold/...` passes.
- [ ] `Generate` returns the correct set of files based on configuration flags.
</verification>

<success_criteria>
- [ ] Sub-generators for Actions, Docker, and FluxCD implemented.
- [ ] Main `Generate` function correctly aggregates results.
- [ ] All file paths and contents match specifications.
</success_criteria>

<output>
After completion, create `.planning/phases/01-core-foundation/01-03-SUMMARY.md`
</output>
