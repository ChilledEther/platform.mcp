---
phase: 02-platform-cli
plan: 01
type: execute
wave: 1
depends_on: ["01-03"]
files_modified: [cmd/platform/main.go, internal/cli/cmd/generate.go]
autonomous: true
---

<objective>
Expose the Platform CLI and align the command structure with the project roadmap.

Purpose: Provide a functional entry point for users and ensure the CLI interface matches the planned discovery and roadmap.
Output: A working `platform` binary with a streamlined `generate` command.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-platform-cli/DISCOVERY.md
@internal/cli/cmd/root.go
@internal/cli/cmd/generate.go
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create CLI Entry Point</name>
  <files>cmd/platform/main.go</files>
  <action>
    Create the main entry point for the CLI in `cmd/platform/main.go`.
    It must call `github.com/modelcontextprotocol/platform.mcp/internal/cli/cmd.Execute()`.
  </action>
  <verify>
    `go run cmd/platform/main.go --help` prints the root help text.
  </verify>
  <done>
    CLI binary is executable via `go run`.
  </done>
</task>

<task type="auto">
  <name>Task 2: Align Generate Command Flags</name>
  <files>internal/cli/cmd/generate.go</files>
  <action>
    Align the `generate` command flags with the roadmap:
    1. Move shared flags (`--project-name`, `--output`, `--force`, `--dry-run`) from `workflows` subcommand to the `generate` command itself (or ensure they are inherited correctly).
    2. Add `--with-docker` (boolean) to `generate` command.
    3. Add `--with-actions` (boolean) to `generate` command.
    4. Ensure these flags are available on the `generate` command directly to support the `platform generate` usage pattern.
  </action>
  <verify>
    `go run cmd/platform/main.go generate --help` shows project-name, with-docker, and with-actions flags.
  </verify>
  <done>
    Command flags are aligned with roadmap.
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `go build -o platform ./cmd/platform` succeeds.
- [ ] `./platform generate --help` shows correct flags.
</verification>

<success_criteria>
- [ ] CLI entry point exists at `cmd/platform/main.go`.
- [ ] `generate` command flags match roadmap.
- [ ] Help text is accurate.
</success_criteria>

<output>
After completion, create `.planning/phases/02-platform-cli/02-01-SUMMARY.md`
</output>
