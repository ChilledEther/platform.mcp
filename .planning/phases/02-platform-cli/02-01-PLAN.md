---
phase: 02-platform-cli
plan: 01
type: execute
wave: 1
depends_on: ["01-03"]
files_modified: [go.mod, cmd/platform/main.go, cmd/platform/root.go, internal/cli/writer/writer.go, internal/cli/writer/writer_test.go]
autonomous: true
---

<objective>
Establish the CLI skeleton and implement robust I/O handling.

Purpose: Create the entry point and safety mechanisms (dry-run, overwrite protection) required before wiring up generation logic.
Output: A working `platform` binary that prints help and a tested Writer package.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-core-foundation/01-03-SUMMARY.md
@.planning/phases/02-platform-cli/DISCOVERY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: CLI Skeleton</name>
  <files>go.mod, cmd/platform/main.go, cmd/platform/root.go</files>
  <action>
    1. Add `github.com/spf13/cobra` dependency.
    2. Create `cmd/platform/main.go` entry point.
    3. Create `cmd/platform/root.go` with base command configuration.
  </action>
  <verify>
    `go run cmd/platform/main.go --help` prints Cobra help text.
  </verify>
  <done>
    Help command works, binary builds.
  </done>
</task>

<task type="auto">
  <name>Task 2: I/O Writer Implementation (TDD)</name>
  <files>internal/cli/writer/writer.go, internal/cli/writer/writer_test.go</files>
  <action>
    Implement `Writer` interface handling:
    - `Write(files []scaffold.File, opts WriteOptions) error`
    - DryRun support (print only)
    - Force flag support (skip confirmation)
    - Directory creation
    - Interactive overwrite prompt
  </action>
  <verify>
    `go test ./internal/cli/writer/...` passes.
  </verify>
  <done>
    Unit tests cover dry-run, force overwrite, and cancellation scenarios.
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `go run cmd/platform/main.go` runs successfully
- [ ] `go test ./internal/cli/writer` passes
</verification>

<success_criteria>
- [ ] CLI entry point exists
- [ ] Writer handles I/O safety (dry-run, overwrite)
- [ ] Tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/02-platform-cli/02-01-SUMMARY.md`
</output>
