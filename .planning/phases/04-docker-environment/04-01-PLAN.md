---
phase: 04-docker-environment
plan: 01
type: execute
wave: 3
depends_on: ["02-02", "03-02"]
files_modified: [Dockerfile, scripts/Invoke-DockerBuild.ps1, scripts/Test-Docker.ps1]
autonomous: true
---

<objective>
Containerize the Platform MCP server.

Purpose: Provide a portable and easy-to-deploy environment for the MCP server.
Output: A multi-stage Dockerfile and supporting scripts for building and testing the image.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-platform-cli/02-02-SUMMARY.md
@.planning/phases/03-platform-mcp/03-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Multi-stage Dockerfile</name>
  <files>Dockerfile</files>
  <action>
    Create a multi-stage Alpine-based Dockerfile:
    1. Build stage: Go 1.25.5 image to compile the MCP binary.
    2. Final stage: Alpine image with the binary and CA certificates.
  </action>
  <verify>
    `docker build -t platform-mcp .` completes successfully.
  </verify>
  <done>
    Optimized Docker image can be built.
  </done>
</task>

<task type="auto">
  <name>Task 2: Build and Test Scripts</name>
  <files>scripts/Invoke-DockerBuild.ps1, scripts/Test-Docker.ps1</files>
  <action>
    Implement PowerShell scripts for automation:
    1. `Invoke-DockerBuild.ps1`: Builds the Docker image.
    2. `Test-Docker.ps1`: Runs a basic test against the built image.
  </action>
  <verify>
    Scripts execute without errors.
  </verify>
  <done>
    Docker automation scripts are functional.
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `docker build` succeeds.
- [ ] Automation scripts work.
</verification>

<success_criteria>
- [ ] Dockerfile implemented.
- [ ] Build and test scripts functional.
</success_criteria>

<output>
After completion, create `.planning/phases/04-docker-environment/04-01-SUMMARY.md`
</output>
